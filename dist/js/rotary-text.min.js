/**!
 * Rotary Text v0.1.0
 * Copyright 2015 Mark Rabey <mark@markrabey.com> (http://markrabey.com)
 * Licensed under the MIT license
 */
"use strict";var Rotary=function(a,b){return this.init(document.getElementById(a),b)};Rotary.prototype={init:function(a,b){b=b||{},this.opts={displayDuration:"undefined"==typeof b.displayDuration?1e3:b.displayDuration,fadeInDuration:"undefined"==typeof b.fadeInDuration?350:b.fadeInDuration,fadeOutDuration:"undefined"==typeof b.fadeOutDuration?450:b.fadeOutDuration,animationDuration:"undefined"==typeof b.animationDuration?450:b.animationDuration,itemSelector:"undefined"==typeof b.itemSelector?".rotary__text":b.itemSelector,activeItemClass:"undefined"==typeof b.activeItemClass?"rotary__text--active":b.activeItemClass,rotations:"undefined"==typeof b.rotations?1:b.rotations,animation:"undefined"==typeof b.animation?"fade":b.animation,holdOnEnd:"undefined"==typeof b.holdOnEnd?!0:b.holdOnEnd},this.counter=0,this.el=a,this.$items=a.querySelectorAll(this.opts.itemSelector),this.numItems=this.$items.length,this.rotations=[];var c=this;return[].forEach.call(this.$items,function(a,b){c.rotations[b]=0,c.opts.animation&&(a.classList.add(c.opts.animation),a.style.animationDuration=c.opts.animationDuration/1e3+"s")}),this.cycleText(),this},cycleText:function(){var a=this.$items[this.counter],b=this.opts.animation+"--in",c=this.opts.animation+"--out",d=this.opts.animation+"--transitioning",e=this;a.addEventListener("animationend",function(a){var f=a.target;f.classList.remove(d),setTimeout(function(){f.classList.contains(b)?e.isComplete()?(f.classList.remove(b),e.opts.holdOnEnd||(f.classList.remove(e.opts.activeItemClass),f.classList.add(c,d))):(f.classList.remove(b,e.opts.activeItemClass),f.classList.add(c,d),e.counter+1>0?e.counter=e.counter+1===e.numItems?0:e.counter+1:e.counter=e.counter-1<0?e.numItems-1:e.counter-1,e.cycleText()):f.classList.remove(c)},e.opts.displayDuration)}),a.classList.add(this.opts.activeItemClass,b,d),this.rotations[this.counter]=this.rotations[this.counter]+1},isComplete:function(){return this.opts.rotations>0&&this.rotations[this.numItems-1]===this.opts.rotations}};