/**!
 * Rotary v0.1.0
 * Copyright 2015 Mark Rabey <mark@markrabey.com> (http://markrabey.com)
 * Licensed under the MIT license
 */
"use strict";var Rotary=function(a,b){return this.init(document.getElementById(a),b)};Rotary.prototype={init:function(a,b){b=b||{};this.opts={displayDuration:typeof b.displayDuration==="undefined"?1e3:b.displayDuration,fadeInDuration:typeof b.fadeInDuration==="undefined"?350:b.fadeInDuration,fadeOutDuration:typeof b.fadeOutDuration==="undefined"?450:b.fadeOutDuration,animationDuration:typeof b.animationDuration==="undefined"?450:b.animationDuration,itemSelector:typeof b.itemSelector==="undefined"?".rotary__text":b.itemSelector,activeItemClass:typeof b.activeItemClass==="undefined"?"rotary__text--active":b.activeItemClass,rotations:typeof b.rotations==="undefined"?1:b.rotations,animation:typeof b.animation==="undefined"?"fade":b.animation,holdOnEnd:typeof b.holdOnEnd==="undefined"?true:b.holdOnEnd};this.counter=0;this.el=a;this.$items=a.querySelectorAll(this.opts.itemSelector);this.numItems=this.$items.length;this.rotations=[];var c=this;[].forEach.call(this.$items,function(a,b){c.rotations[b]=0;if(c.opts.animation){a.classList.add(c.opts.animation);a.style.animationDuration=c.opts.animationDuration/1e3+"s"}});this.cycleText();return this},cycleText:function(){var a=this.$items[this.counter],b=this.opts.animation+"--in",c=this.opts.animation+"--out",d=this.opts.animation+"--transitioning",e=this;a.addEventListener("animationend",function(a){var f=a.target;f.classList.remove(d);setTimeout(function(){if(f.classList.contains(b)){if(e.isComplete()){f.classList.remove(b);if(!e.opts.holdOnEnd){f.classList.remove(e.opts.activeItemClass);f.classList.add(c,d)}}else{f.classList.remove(b,e.opts.activeItemClass);f.classList.add(c,d);if(e.counter+1>0){e.counter=e.counter+1===e.numItems?0:e.counter+1}else{e.counter=e.counter-1<0?e.numItems-1:e.counter-1}e.cycleText()}}else{f.classList.remove(c)}},e.opts.displayDuration)});a.classList.add(this.opts.activeItemClass,b,d);this.rotations[this.counter]=this.rotations[this.counter]+1},isComplete:function(){return this.opts.rotations>0&&this.rotations[this.numItems-1]===this.opts.rotations}};